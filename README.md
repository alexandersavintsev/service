## FastAPI-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ø-N –ø–æ—Å—Ç–æ–≤ –ø–æ –ª–∞–π–∫–∞–º

### üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π API-—Å–µ—Ä–≤–∏—Å –Ω–∞ –±–∞–∑–µ **FastAPI**, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π HTTP-–∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Ç–æ–ø N –ø–æ—Å—Ç–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∫—É—Ä—Å–∞ –æ—Ç [karpov.courses](https://karpov.courses/ml-start?_gl=1*1p6bprb*_ga*MTUyNTQzNDkxMi4xNzUwNDEzNDQ1*_ga_DZP7KEXCQQ*czE3NTA0MTM0NDQkbzEkZzEkdDE3NTA0MTQ0MTMkajU3JGwwJGgw).

---

### üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python 3.10+
- FastAPI
- PostgreSQL
- SQLAlchemy (ORM)
- Pydantic

---

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
.
‚îú‚îÄ‚îÄ app.py            # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
‚îú‚îÄ‚îÄ database.py       # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ main.py           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ schema.py         # Pydantic-—Å—Ö–µ–º—ã –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ table_post.py     # ORM-–º–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã post –∏ SQL-–∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ select
‚îú‚îÄ‚îÄ table_user.py     # ORM-–º–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã user + –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ (country, os)
‚îú‚îÄ‚îÄ table_feed.py     # ORM-–º–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã feed_action + —Å–≤—è–∑–∏
```

---

### üìù –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

#### üî∏–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª  `database.py`

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLAlchemy
- –°–æ–∑–¥–∞–Ω –¥–≤–∏–∂–æ–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º URL PostgreSQL
- –ù–∞—Å—Ç—Ä–æ–µ–Ω `SessionLocal` ‚Äî —Å–µ—Å—Å–∏—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î
- –°–æ–∑–¥–∞–Ω Base ‚Äî –æ—Å–Ω–æ–≤–∞ –¥–ª—è –≤—Å–µ—Ö ORM-–º–æ–¥–µ–ª–µ–π

#### üî∏–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª  `table_post.py`

- –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `Post` –Ω–∞ –±–∞–∑–µ SQLAlchemy (–¥–æ–±–∞–≤–ª–µ–Ω–∞ ORM-–º–æ–¥–µ–ª—å `Post`)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤ —Å —Ç–µ–º–æ–π `"business"`.

#### üî∏–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `table_user.py`

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å `User` –Ω–∞ SQLAlchemy (–¥–æ–±–∞–≤–ª–µ–Ω–∞ ORM-–º–æ–¥–µ–ª—å `User`)
- –í—ã–ø–æ–ª–Ω–µ–Ω –≥—Ä—É–ø–ø–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å –ø–æ (`country, os`) —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `group = 3`
- –û—Ç–±–æ—Ä –ø–∞—Ä —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø–∏—Å–µ–π `> 100`
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–ø–∏—Å–∫–æ–º –∫–æ—Ä—Ç–µ–∂–µ–π

#### üî∏–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª  `table_feed.py`

- –ú–æ–¥–µ–ª—å `Feed`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–µ `feed_action`
- –ü–æ–ª—è `user_id` –∏ `post_id` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ForeignKey`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Base` –∏–∑ `database.py`
- –°–≤—è–∑–∏ —á–µ—Ä–µ–∑ `relationship()` –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

#### üî∏–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª  `schema.py`

- –°–æ–¥–µ—Ä–∂–∏—Ç Pydantic-–º–æ–¥–µ–ª–∏ `UserGet, PostGet –∏ FeedGet`
- –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
- –í—Å–µ –ø–æ–ª—è —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `orm_mode = True` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ORM-–æ–±—ä–µ–∫—Ç–æ–≤

#### üî∏–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª  `app.py`

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - `/user/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `/post/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω –ø–æ—Å—Ç
  - `/user/{id}/feed?limit=N` ‚Äî –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
  - `/post/{id}/feed?limit=N` ‚Äî –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –ø–æ—Å—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- –î–ª—è feed-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: 404 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π, 200 —Å –ø—É—Å—Ç—ã–º —Å–ø–∏—Å–∫–æ–º –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π

#### üî∏–°–æ–∑–¥–∞–µ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É  `table_feed.py` –∏ `schema.py` 

- –í `Feed` –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `user` –∏ `post` ‚Äî `relationship()` –∫ —Ç–∞–±–ª–∏—Ü–∞–º `User` –∏ `Post`
- –í `FeedGet` (Pydantic) –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `user: UserGet` –∏ `post: PostGet`
- FastAPI —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ id
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Pydantic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### üî∏–î–æ–±–∞–≤–ª—è–µ–º endpoint /post/recommendations/ –≤  `app.py`

- GET /post/recommendations/ —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  - `id` ‚Äî –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  - `limit` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –ø–æ—Å—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤ (`action='like'`) –ø–æ —Ç–∞–±–ª–∏—Ü–µ feed
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤
- –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ PostGet (id, text, topic)

---

### üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/alexandersavintsev/service.git
cd service
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ `requirements.txt` –µ—â—ë –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ —Å —Ç–∞–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏:
```bash
fastapi==0.75.1
pandas==1.4.2
sqlalchemy==1.4.35
requests==2.27.1
catboost==1.0.6
numpy==1.22.4
pydantic==1.9.1
scikit_learn==1.1.1
lightgbm==3.3.2
xgboost==1.6.1
psycopg2-binary==2.9.3
uvicorn==0.16.0
category-encoders==2.5.0
loguru==0.6.0
implicit==0.5.2
lightfm==1.16
tqdm==4.62.0
matplotlib==3.4.2
nltk==3.8.1
pyarrow==5.0.0
scipy==1.7.1
seaborn==0.11.1
statsmodels==0.12.2
```

3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn app:app --reload
```

---

### üìé –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

üîπ –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-5 –ø–æ—Å—Ç–æ–≤ –ø–æ –ª–∞–π–∫–∞–º:
```bash
GET /post/recommendations/?limit=5
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```bash
[
  {
    "id": 123,
    "text": "–û—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø–æ—Å—Ç",
    "topic": "tech"
  },
  ...
]
```

---

### üë®‚Äçüíª –ê–≤—Ç–æ—Ä
–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ [karpov.courses](https://karpov.courses/ml-start?_gl=1*1p6bprb*_ga*MTUyNTQzNDkxMi4xNzUwNDEzNDQ1*_ga_DZP7KEXCQQ*czE3NTA0MTM0NDQkbzEkZzEkdDE3NTA0MTQ0MTMkajU3JGwwJGgw).

–ê–≤—Ç–æ—Ä: alexandersavintsev

GitHub: https://github.com/alexandersavintsev/service

---

MIT License
Copyright (c) 2025 alexandersavintsev
